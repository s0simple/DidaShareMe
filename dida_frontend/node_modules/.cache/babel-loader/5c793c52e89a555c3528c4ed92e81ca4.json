{"ast":null,"code":"\"use strict\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nvar assign = require('object-assign');\nvar validators = require('../validators');\nvar Patch = require('./patch');\nvar defaultMutateOptions = {\n  returnDocuments: false\n};\nfunction Transaction() {\n  var operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var client = arguments.length > 1 ? arguments[1] : undefined;\n  var transactionId = arguments.length > 2 ? arguments[2] : undefined;\n  this.trxId = transactionId;\n  this.operations = operations;\n  this.client = client;\n}\nassign(Transaction.prototype, {\n  clone: function clone() {\n    return new Transaction(this.operations.slice(0), this.client, this.trxId);\n  },\n  create: function create(doc) {\n    validators.validateObject('create', doc);\n    return this._add({\n      create: doc\n    });\n  },\n  createIfNotExists: function createIfNotExists(doc) {\n    var op = 'createIfNotExists';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  createOrReplace: function createOrReplace(doc) {\n    var op = 'createOrReplace';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  delete: function _delete(documentId) {\n    validators.validateDocumentId('delete', documentId);\n    return this._add({\n      delete: {\n        id: documentId\n      }\n    });\n  },\n  patch: function patch(documentId, patchOps) {\n    var isBuilder = typeof patchOps === 'function';\n    var isPatch = documentId instanceof Patch; // transaction.patch(client.patch('documentId').inc({visits: 1}))\n\n    if (isPatch) {\n      return this._add({\n        patch: documentId.serialize()\n      });\n    } // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n\n    if (isBuilder) {\n      var patch = patchOps(new Patch(documentId, {}, this.client));\n      if (!(patch instanceof Patch)) {\n        throw new Error('function passed to `patch()` must return the patch');\n      }\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n    return this._add({\n      patch: assign({\n        id: documentId\n      }, patchOps)\n    });\n  },\n  transactionId: function transactionId(id) {\n    if (!id) {\n      return this.trxId;\n    }\n    this.trxId = id;\n    return this;\n  },\n  serialize: function serialize() {\n    return this.operations.slice();\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit(options) {\n    if (!this.client) {\n      throw new Error('No `client` passed to transaction, either provide one or pass the ' + 'transaction to a clients `mutate()` method');\n    }\n    return this.client.mutate(this.serialize(), assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  },\n  reset: function reset() {\n    this.operations = [];\n    return this;\n  },\n  _add: function _add(mut) {\n    this.operations.push(mut);\n    return this;\n  }\n});\nmodule.exports = Transaction;","map":{"version":3,"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","assign","require","validators","Patch","defaultMutateOptions","returnDocuments","Transaction","operations","arguments","length","undefined","client","transactionId","trxId","prototype","clone","slice","create","doc","validateObject","_add","createIfNotExists","op","requireDocumentId","createOrReplace","delete","_delete","documentId","validateDocumentId","id","patch","patchOps","isBuilder","isPatch","serialize","Error","toJSON","commit","options","mutate","reset","mut","push","module","exports"],"sources":["C:/Users/Sampah/Desktop/project/try/DIDASHARE/dida_frontend/node_modules/@sanity/client/lib/data/transaction.js"],"sourcesContent":["\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar validators = require('../validators');\n\nvar Patch = require('./patch');\n\nvar defaultMutateOptions = {\n  returnDocuments: false\n};\n\nfunction Transaction() {\n  var operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var client = arguments.length > 1 ? arguments[1] : undefined;\n  var transactionId = arguments.length > 2 ? arguments[2] : undefined;\n  this.trxId = transactionId;\n  this.operations = operations;\n  this.client = client;\n}\n\nassign(Transaction.prototype, {\n  clone: function clone() {\n    return new Transaction(this.operations.slice(0), this.client, this.trxId);\n  },\n  create: function create(doc) {\n    validators.validateObject('create', doc);\n    return this._add({\n      create: doc\n    });\n  },\n  createIfNotExists: function createIfNotExists(doc) {\n    var op = 'createIfNotExists';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  createOrReplace: function createOrReplace(doc) {\n    var op = 'createOrReplace';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  delete: function _delete(documentId) {\n    validators.validateDocumentId('delete', documentId);\n    return this._add({\n      delete: {\n        id: documentId\n      }\n    });\n  },\n  patch: function patch(documentId, patchOps) {\n    var isBuilder = typeof patchOps === 'function';\n    var isPatch = documentId instanceof Patch; // transaction.patch(client.patch('documentId').inc({visits: 1}))\n\n    if (isPatch) {\n      return this._add({\n        patch: documentId.serialize()\n      });\n    } // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n\n\n    if (isBuilder) {\n      var patch = patchOps(new Patch(documentId, {}, this.client));\n\n      if (!(patch instanceof Patch)) {\n        throw new Error('function passed to `patch()` must return the patch');\n      }\n\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n\n    return this._add({\n      patch: assign({\n        id: documentId\n      }, patchOps)\n    });\n  },\n  transactionId: function transactionId(id) {\n    if (!id) {\n      return this.trxId;\n    }\n\n    this.trxId = id;\n    return this;\n  },\n  serialize: function serialize() {\n    return this.operations.slice();\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit(options) {\n    if (!this.client) {\n      throw new Error('No `client` passed to transaction, either provide one or pass the ' + 'transaction to a clients `mutate()` method');\n    }\n\n    return this.client.mutate(this.serialize(), assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  },\n  reset: function reset() {\n    this.operations = [];\n    return this;\n  },\n  _add: function _add(mut) {\n    this.operations.push(mut);\n    return this;\n  }\n});\nmodule.exports = Transaction;"],"mappings":"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"},"metadata":{},"sourceType":"script"}